LICENSE   := GPLv2
VERSION   := git
DOWNLOADS := sel4.git

URL(sel4) := git@github.com:lulu98/seL4.git
REV(sel4) := 25f8ed87b7bdec8fae4398fdf3021c9e8a85747d
DIR(sel4) := src/kernel/sel4

#$(call check_tool,python)
#$(call check_python_module,future)
#$(call check_python_module,tempita)
#$(call check_python_module,ply)
#$(call check_python_module,six)

#PATCHES   := $(sort $(wildcard $(REP_DIR)/patches/*.patch))

#HASH_INPUT += $(REP_DIR)/patches/rpi4.config

# adjust kernel config usable on qemu and on native hw, and add a 32bit version
#default: $(DOWNLOADS)
#	$(VERBOSE)mkdir -p src/kernel/sel4/configs/pc99/x86_64
#	$(VERBOSE)mkdir -p src/kernel/sel4/configs/pc99/ia32
#	$(VERBOSE)cp src/kernel/sel4/configs/pc99/autoconf.h src/kernel/sel4/configs/pc99/x86_64/autoconf.h
#	$(VERBOSE)mv src/kernel/sel4/configs/pc99/autoconf.h src/kernel/sel4/configs/pc99/ia32/autoconf.h
#	$(VERBOSE)sed -i "s.^ \*/. \*/\n#ifndef ARCH_IA32\n#define ARCH_IA32\n#endif\n." src/kernel/sel4/configs/pc99/ia32/autoconf.h
#	$(VERBOSE)mkdir -p src/kernel/sel4/configs/rpi/rpi4
#	$(VERBOSE)mv src/kernel/sel4/configs/rpi4/autoconf.h src/kernel/sel4/configs/rpi/rpi4/autoconf.h
#	$(VERBOSE)patch -p0 <$(REP_DIR)/patches/rpi4.config

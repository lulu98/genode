LICENSE           := GPLv2
VERSION           := git
DOWNLOADS         := mk.git foc.git l4re-core.git drivers-frst.git bootstrap.git

URL(mk)           := https://github.com/kernkonzept/mk.git
REV(mk)           := 561e1d65762de3c88dc6154113ee5869dd425e5d
DIR(mk)           := src/kernel/foc/l4

URL(foc)          := https://github.com/kernkonzept/fiasco.git
REV(foc)          := 834d17d9bd2a208e7a265a462df3db9895d0d04c
DIR(foc)          := src/kernel/foc/kernel/fiasco

URL(l4re-core)    := https://github.com/kernkonzept/l4re-core.git
REV(l4re-core)    := fe794038e477e5a54762126689483c0e91a177a8
DIR(l4re-core)    := src/kernel/foc/l4/pkg/l4re-core

URL(drivers-frst) := https://github.com/kernkonzept/drivers-frst.git
REV(drivers-frst) := 2b9298ca5d2eb323f7aaded8ad1beed5c7fc1d6e
DIR(drivers-frst) := src/kernel/foc/l4/pkg/drivers-frst

URL(bootstrap)    := https://github.com/kernkonzept/bootstrap.git
REV(bootstrap)    := 866445333d0fa0ad4a57f5364d9cbe421580465e
DIR(bootstrap)    := src/kernel/foc/l4/pkg/bootstrap

PATCHES           := $(addprefix patches/,$(notdir $(wildcard $(REP_DIR)/patches/*.patch)))

PATCH_OPT(patches/0001-L4RE-Remove-moe-from-switch_ram_base-target.patch)         := -p2 -d${DIR(mk)}
PATCH_OPT(patches/0002-FOC-change-l4_task_cap_equal-semantic.patch)               := -p3 -d${DIR(foc)}
PATCH_OPT(patches/0003-Sigma0-raise-sigma0-s-priority-to-maximum.patch)           := -p4 -d${DIR(l4re-core)}
PATCH_OPT(patches/0005-FOC-Increase-name-buffer-of-JDB-to-32K.patch)              := -p3 -d${DIR(foc)}
PATCH_OPT(patches/0007-L4RE-fix-x86-syscall-bindings-to-use-in-C-namespace.patch) := -p4 -d${DIR(l4re-core)}
PATCH_OPT(patches/0009-Bootstrap-read-out-comport-on-x86-from-BDA-area.patch)     := -p4 -d${DIR(bootstrap)}
PATCH_OPT(patches/0010-L4RE-get-rid-of-__builtin_strlen-usage.patch)              := -p4 -d${DIR(l4re-core)}
PATCH_OPT(patches/0011-Ex_regs-Change-user_flags.patch)                           := -p3 -d${DIR(foc)}
PATCH_OPT(patches/0012-Flush-the-TLB-after-idle-operation.patch)                  := -p3 -d${DIR(foc)}
PATCH_OPT(patches/0014-Always-enable-user-mode-access-for-performance-monit.patch):= -p3 -d${DIR(foc)}
PATCH_OPT(patches/0015-VMX-disable-event-injection-if-requested-by-VMM.patch)     := -p3 -d${DIR(foc)}
PATCH_OPT(patches/0016-svm-provide-cr0-to-guest-if-np-enabled.patch)              := -p3 -d${DIR(foc)}
PATCH_OPT(patches/0017-svm-avoid-forceful-exit-on-task-switch.patch)              := -p3 -d${DIR(foc)}

$(call check_tool,gawk)
